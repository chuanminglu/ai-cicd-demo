# å¦‚ä½•åˆ¶é€ è´¨é‡é—¨å¤±è´¥åœºæ™¯

> **ğŸ“Œ ç”¨é€”**: ç”¨äºCI/CDæ¼”ç»ƒï¼Œæµ‹è¯•è´¨é‡é—¨æ˜¯å¦ç”Ÿæ•ˆ

---

## ğŸ¯ ä½¿ç”¨åœºæ™¯

åœ¨ä»¥ä¸‹æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½éœ€è¦æ•…æ„åˆ¶é€ ä»£ç é—®é¢˜æ¥éªŒè¯è´¨é‡é—¨ï¼š

1. âœ… éªŒè¯GitHub Actionsé…ç½®æ˜¯å¦æ­£ç¡®
2. âœ… æµ‹è¯•è´¨é‡é—¨æ˜¯å¦çœŸçš„ä¼šæ‹¦æˆªé—®é¢˜ä»£ç 
3. âœ… æ¼”ç¤ºä¼ ç»Ÿè´¨é‡é—¨çš„å±€é™æ€§ï¼ˆè§„åˆ™æ£€æŸ¥ vs ä¸šåŠ¡é€»è¾‘ï¼‰
4. âœ… åŸ¹è®­å›¢é˜Ÿæˆå‘˜ç†è§£è´¨é‡æ ‡å‡†

---

## æ–¹æ³•1ï¼šPylintè¯„åˆ†ä¸è¾¾æ ‡ï¼ˆæœ€ç®€å•ï¼‰â­

### ç›®æ ‡
è®©Pylintè¯„åˆ†ä½äº8.0ï¼Œè§¦å‘è´¨é‡é—¨å¤±è´¥

### æ“ä½œæ–¹æ³•

**æ–¹å¼Aï¼šæ·»åŠ æœªä½¿ç”¨çš„å˜é‡**

```python
# åœ¨ src/price_calculator.py çš„ä»»æ„æ–¹æ³•ä¸­æ·»åŠ 
def calculate_final_price(self, original_price, discount_coupon, points_value):
    final_price = original_price - discount_coupon - points_value
    x = 1  # âŒ æœªä½¿ç”¨çš„å˜é‡ï¼ˆæ¯ä¸ªæ‰£0.5åˆ†ï¼‰
    y = 2  # âŒ æœªä½¿ç”¨çš„å˜é‡
    z = 3  # âŒ æœªä½¿ç”¨çš„å˜é‡
    return final_price
```

**é¢„æœŸç»“æœ**ï¼š
```
W0612: Unused variable 'x' (unused-variable)
W0612: Unused variable 'y' (unused-variable)
W0612: Unused variable 'z' (unused-variable)

Your code has been rated at 7.50/10  âŒ (é˜ˆå€¼: 8.0)
```

---

**æ–¹å¼Bï¼šä½¿ç”¨ä¸è§„èŒƒçš„å˜é‡å**

```python
def calculate_final_price(self, original_price, discount_coupon, points_value):
    FinalPrice = original_price - discount_coupon - points_value  # âŒ ä¸ç¬¦åˆsnake_case
    MyVar = 10  # âŒ å˜é‡åä¸è§„èŒƒ
    return FinalPrice
```

**é¢„æœŸç»“æœ**ï¼š
```
C0103: Variable name "FinalPrice" doesn't conform to snake_case naming style
C0103: Variable name "MyVar" doesn't conform to snake_case naming style
```

---

**æ–¹å¼Cï¼šç¼ºå°‘docstring**

```python
def new_method(self):  # âŒ ç¼ºå°‘æ–‡æ¡£å­—ç¬¦ä¸²
    return True
```

**é¢„æœŸç»“æœ**ï¼š
```
C0116: Missing function or method docstring
```

---

**æ–¹å¼Dï¼šè¡Œè¿‡é•¿**

```python
def calculate_final_price(self, original_price, discount_coupon, points_value):
    """è¿™æ˜¯ä¸€ä¸ªéå¸¸éå¸¸éå¸¸éå¸¸éå¸¸éå¸¸éå¸¸éå¸¸éå¸¸éå¸¸éå¸¸éå¸¸éå¸¸éå¸¸éå¸¸éå¸¸éå¸¸éå¸¸éå¸¸éå¸¸éå¸¸éå¸¸é•¿çš„æ–‡æ¡£å­—ç¬¦ä¸²"""  # âŒ è¶…è¿‡100å­—ç¬¦
    return original_price - discount_coupon - points_value
```

---

### æœ¬åœ°éªŒè¯

```bash
# æ£€æŸ¥Pylintè¯„åˆ†
python -m pylint src/ --fail-under=8.0

# åº”è¯¥æ˜¾ç¤ºå¤±è´¥å¹¶é€€å‡ºç é0
echo $?  # Linux/Mac
echo $LASTEXITCODE  # Windows PowerShell
```

---

## æ–¹æ³•2ï¼šå•å…ƒæµ‹è¯•å¤±è´¥

### ç›®æ ‡
è®©å·²æœ‰æµ‹è¯•ç”¨ä¾‹æ‰§è¡Œå¤±è´¥

### æ“ä½œæ–¹æ³•

**æ–¹å¼Aï¼šä¿®æ”¹è¿”å›å€¼**

```python
def calculate_final_price(self, original_price, discount_coupon, points_value):
    final_price = original_price - discount_coupon - points_value
    return final_price + 1  # âŒ æ•…æ„è¿”å›é”™è¯¯çš„å€¼
```

**é¢„æœŸç»“æœ**ï¼š
```
tests/test_price_calculator.py::test_normal_calculation FAILED
AssertionError: assert 86.0 == 85.0  âŒ
```

---

**æ–¹å¼Bï¼šä¿®æ”¹è®¡ç®—é€»è¾‘**

```python
def calculate_final_price(self, original_price, discount_coupon, points_value):
    final_price = original_price - discount_coupon  # âŒ é—æ¼points_value
    return final_price
```

---

**æ–¹å¼Cï¼šå¼•å…¥å¼‚å¸¸**

```python
def calculate_final_price(self, original_price, discount_coupon, points_value):
    if original_price < 0:  # âŒ æ–°å¢æœªæµ‹è¯•çš„æ¡ä»¶
        raise ValueError("ä»·æ ¼ä¸èƒ½ä¸ºè´Ÿ")  # å¯¼è‡´æŸäº›æµ‹è¯•å¤±è´¥
    final_price = original_price - discount_coupon - points_value
    return final_price
```

---

### æœ¬åœ°éªŒè¯

```bash
# è¿è¡Œæµ‹è¯•
python -m pytest tests/ -v

# åº”è¯¥æ˜¾ç¤ºå¤±è´¥çš„æµ‹è¯•ç”¨ä¾‹
```

---

## æ–¹æ³•3ï¼šæµ‹è¯•è¦†ç›–ç‡ä¸è¾¾æ ‡

### ç›®æ ‡
è®©ä»£ç è¦†ç›–ç‡ä½äº80%

### æ“ä½œæ–¹æ³•

**æ–¹å¼Aï¼šæ·»åŠ æ–°æ–¹æ³•ä½†ä¸å†™æµ‹è¯•**

```python
class PriceCalculator:
    # ... ç°æœ‰ä»£ç  ...
    
    def validate_discount(self, discount):
        """æ ¡éªŒä¼˜æƒ é‡‘é¢ï¼ˆâŒ æ²¡æœ‰æµ‹è¯•è¦†ç›–ï¼‰"""
        if discount < 0:
            raise ValueError("ä¼˜æƒ é‡‘é¢ä¸èƒ½ä¸ºè´Ÿæ•°")
        if discount > 1000:
            raise ValueError("ä¼˜æƒ é‡‘é¢è¿‡å¤§")
        return True
    
    def apply_vip_discount(self, price, vip_level):
        """VIPæŠ˜æ‰£ï¼ˆâŒ æ²¡æœ‰æµ‹è¯•è¦†ç›–ï¼‰"""
        discount_rates = {1: 0.95, 2: 0.9, 3: 0.85}
        return price * discount_rates.get(vip_level, 1.0)
```

**é¢„æœŸç»“æœ**ï¼š
```
Name                      Stmts   Miss  Cover
---------------------------------------------
src/price_calculator.py      15      6    60%  âŒ
---------------------------------------------
TOTAL                        15      6    60%

Required test coverage of 80% not reached. Total coverage: 60.00%
```

---

**æ–¹å¼Bï¼šæ·»åŠ æœªæ‰§è¡Œçš„åˆ†æ”¯**

```python
def calculate_final_price(self, original_price, discount_coupon, points_value):
    final_price = original_price - discount_coupon - points_value
    
    # âŒ æ–°å¢çš„æ¡ä»¶åˆ†æ”¯ï¼Œä½†æµ‹è¯•ç”¨ä¾‹ä¸è¦†ç›–
    if final_price < 0:
        return 0
    elif final_price > 10000:
        return 10000  # è¿™ä¸ªåˆ†æ”¯ä¸ä¼šè¢«æµ‹è¯•è¦†ç›–
    
    return final_price
```

---

### æœ¬åœ°éªŒè¯

```bash
# æ£€æŸ¥è¦†ç›–ç‡
python -m pytest tests/ --cov=src --cov-report=term-missing --cov-fail-under=80

# åº”è¯¥æ˜¾ç¤ºè¦†ç›–ç‡ä¸è¶³
```

---

## æ–¹æ³•4ï¼šè¯­æ³•é”™è¯¯ï¼ˆä¸æ¨èï¼‰

### ç›®æ ‡
åˆ¶é€ Pythonè¯­æ³•é”™è¯¯

### æ“ä½œæ–¹æ³•

```python
def calculate_final_price(self, original_price, discount_coupon, points_value)  # âŒ ç¼ºå°‘å†’å·
    final_price = original_price - discount_coupon - points_value
    return final_price
```

æˆ–

```python
def calculate_final_price(self, original_price, discount_coupon, points_value):
    final_price = original_price - discount_coupon - points_value
   return final_price  # âŒ ç¼©è¿›é”™è¯¯
```

**ä¸ºä»€ä¹ˆä¸æ¨è**ï¼š
- è¿™æ˜¯å¤ªä½çº§çš„é”™è¯¯ï¼Œæ¼”ç¤ºä»·å€¼ä¸å¤§
- IDEä¼šç«‹å³æç¤ºï¼Œæ²¡æ³•æäº¤
- ä¸èƒ½å±•ç¤ºè´¨é‡é—¨çš„ä»·å€¼

---

## ğŸ“Š å„æ–¹æ³•å¯¹æ¯”

| æ–¹æ³• | è§¦å‘é€Ÿåº¦ | æ¼”ç¤ºä»·å€¼ | æ˜“æ¢å¤ | æ¨èåº¦ |
|------|---------|----------|--------|--------|
| Pylintè¯„åˆ†ä¸è¾¾æ ‡ | âš¡âš¡âš¡ å¿« | â­â­â­â­ é«˜ | âœ… æ˜“ | â­â­â­â­â­ |
| å•å…ƒæµ‹è¯•å¤±è´¥ | âš¡âš¡ ä¸­ | â­â­â­ ä¸­ | âœ… æ˜“ | â­â­â­â­ |
| è¦†ç›–ç‡ä¸è¾¾æ ‡ | âš¡âš¡âš¡ å¿« | â­â­â­â­ é«˜ | âš ï¸ ä¸­ | â­â­â­â­ |
| è¯­æ³•é”™è¯¯ | âš¡ æ…¢ | â­ ä½ | âœ… æ˜“ | â­ |

---

## ğŸ“ æ¼”ç»ƒæ¨èç»„åˆ

### åœºæ™¯Aï¼šæ¼”ç¤ºä¼ ç»Ÿè´¨é‡é—¨çš„ä»·å€¼

**æ­¥éª¤**ï¼š
1. æ·»åŠ æœªä½¿ç”¨çš„å˜é‡ï¼ˆPylintå¤±è´¥ï¼‰
2. æäº¤ä»£ç ï¼Œè§‚å¯ŸGitHub Actionsæ‹¦æˆª
3. ä¿®å¤é—®é¢˜ï¼Œå†æ¬¡æäº¤ï¼Œè§‚å¯Ÿé€šè¿‡

**æ•™å­¦ç‚¹**ï¼šå±•ç¤ºä»£ç è§„èŒƒæ£€æŸ¥çš„é‡è¦æ€§

---

### åœºæ™¯Bï¼šæ¼”ç¤ºä¼ ç»Ÿè´¨é‡é—¨çš„å±€é™

**æ­¥éª¤**ï¼š
1. ç¡®ä¿ä»£ç Pylint 10.0åˆ†ã€æµ‹è¯•100%è¦†ç›–
2. ä½†ä»£ç æœ‰è´Ÿä»·æ ¼æ¼æ´ï¼ˆä¸šåŠ¡é€»è¾‘é—®é¢˜ï¼‰
3. æäº¤ä»£ç ï¼Œä¼ ç»Ÿè´¨é‡é—¨å…¨éƒ¨é€šè¿‡ âœ…
4. ç”¨AIå®¡æŸ¥ï¼Œå‘ç°ä¸šåŠ¡é€»è¾‘æ¼æ´ âŒ

**æ•™å­¦ç‚¹**ï¼šä¼ ç»Ÿå·¥å…·æ£€æŸ¥"æ ¼å¼"ï¼ŒAIç†è§£"é€»è¾‘"

---

### åœºæ™¯Cï¼šæ¼”ç¤ºæµ‹è¯•è¦†ç›–ç‡çš„é‡è¦æ€§

**æ­¥éª¤**ï¼š
1. æ·»åŠ æ–°æ–¹æ³•ä½†ä¸å†™æµ‹è¯•ï¼ˆè¦†ç›–ç‡é™ä½ï¼‰
2. æäº¤ä»£ç ï¼Œè§‚å¯Ÿè¦†ç›–ç‡æ£€æŸ¥å¤±è´¥
3. è¡¥å……æµ‹è¯•ç”¨ä¾‹ï¼Œè¦†ç›–ç‡æ¢å¤

**æ•™å­¦ç‚¹**ï¼šæµ‹è¯•è¦†ç›–ç‡æ˜¯ä»£ç è´¨é‡çš„é‡è¦æŒ‡æ ‡

---

## ğŸ”§ å¿«é€Ÿåˆ¶é€ é—®é¢˜çš„è„šæœ¬

### Windows (PowerShell)

åˆ›å»º `create_issue.ps1`ï¼š

```powershell
# å¿«é€Ÿåˆ¶é€ Pylinté—®é¢˜
$file = "src\price_calculator.py"
$content = Get-Content $file
$content = $content -replace "return final_price", "x = 1`n        return final_price"
$content | Set-Content $file

Write-Host "âœ… å·²æ·»åŠ æœªä½¿ç”¨å˜é‡ï¼ŒPylintå°†å¤±è´¥"
Write-Host "ğŸ“‹ éªŒè¯: python -m pylint src/ --fail-under=8.0"
Write-Host "ğŸ”„ æ¢å¤: git checkout src/price_calculator.py"
```

ä½¿ç”¨ï¼š
```powershell
.\create_issue.ps1
```

---

### Linux/Mac (Bash)

åˆ›å»º `create_issue.sh`ï¼š

```bash
#!/bin/bash

# å¿«é€Ÿåˆ¶é€ Pylinté—®é¢˜
sed -i '/return final_price/i\        x = 1  # unused variable' src/price_calculator.py

echo "âœ… å·²æ·»åŠ æœªä½¿ç”¨å˜é‡ï¼ŒPylintå°†å¤±è´¥"
echo "ğŸ“‹ éªŒè¯: python -m pylint src/ --fail-under=8.0"
echo "ğŸ”„ æ¢å¤: git checkout src/price_calculator.py"
```

ä½¿ç”¨ï¼š
```bash
chmod +x create_issue.sh
./create_issue.sh
```

---

## ğŸ”„ å¿«é€Ÿæ¢å¤

### æ¢å¤åˆ°ä¸Šæ¬¡æäº¤

```bash
# æ’¤é”€æ‰€æœ‰æœªæäº¤çš„ä¿®æ”¹
git checkout .

# æˆ–åªæ¢å¤ç‰¹å®šæ–‡ä»¶
git checkout src/price_calculator.py
```

### æ¢å¤åˆ°å¹²å‡€çŠ¶æ€

```bash
# æŸ¥çœ‹ä¿®æ”¹çŠ¶æ€
git status

# æ”¾å¼ƒæ‰€æœ‰ä¿®æ”¹
git reset --hard HEAD
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **ä¸è¦åœ¨ç”Ÿäº§åˆ†æ”¯æ“ä½œ**
   - åªåœ¨æ¼”ç»ƒåˆ†æ”¯ï¼ˆå¦‚`demo`åˆ†æ”¯ï¼‰è¿›è¡Œæµ‹è¯•
   - é¿å…æ±¡æŸ“`main`åˆ†æ”¯å†å²

2. **åŠæ—¶æ¸…ç†**
   - æ¼”ç»ƒç»“æŸååˆ é™¤æµ‹è¯•åˆ†æ”¯
   - ä¸è¦å°†é—®é¢˜ä»£ç åˆå¹¶åˆ°ä¸»åˆ†æ”¯

3. **ä¿å­˜åŸå§‹ä»£ç **
   - åˆ¶é€ é—®é¢˜å‰å…ˆæäº¤å¹²å‡€ç‰ˆæœ¬
   - æˆ–è€…åœ¨æ–°åˆ†æ”¯è¿›è¡Œæµ‹è¯•

4. **æ–‡æ¡£è®°å½•**
   - è®°å½•æ¯æ¬¡åˆ¶é€ çš„é—®é¢˜ç±»å‹
   - è®°å½•è´¨é‡é—¨çš„å“åº”æƒ…å†µ
   - ç”¨äºåç»­åŸ¹è®­å‚è€ƒ

---

## ğŸ“š å»¶ä¼¸é˜…è¯»

- [Pylintå¸¸è§è­¦å‘Šè¯´æ˜](https://pylint.readthedocs.io/en/latest/user_guide/messages/)
- [Pytestè¦†ç›–ç‡æœ€ä½³å®è·µ](https://coverage.readthedocs.io/en/latest/excluding.html)
- [è´¨é‡é—¨æ£€æŸ¥æ‰§è¡ŒæŒ‡å—](./è´¨é‡é—¨æ£€æŸ¥æ‰§è¡ŒæŒ‡å—.md)
- [å¸¸è§é—®é¢˜æ’æŸ¥æŒ‡å—](./å¸¸è§é—®é¢˜æ’æŸ¥æŒ‡å—.md)

---

**æ–‡æ¡£æ›´æ–°æ—¶é—´**: 2026-01-11
