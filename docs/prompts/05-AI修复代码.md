# 提示词05：AI修复代码

## 🎭 角色
Python开发专家，擅长代码重构和防御性编程。

## 📋 任务
修复价格计算模块的负价格漏洞，增加参数校验和异常处理。

## 🎯 目标
生成健壮、安全的价格计算代码。

## 📤 输出要求

### 修复内容
1. 防止负价格（final_price < 0 时返回0）
2. 参数校验（拒绝负数输入）
3. 异常处理（抛出ValueError）
4. 日志记录（记录异常情况）

### 质量要求
- 符合PEP8规范
- 保持原有接口不变
- 增加完整的错误处理

---

## 💬 复制以下内容到AI

```
你是Python专家。请修复以下代码的业务逻辑漏洞：

【粘贴原始的 price_calculator.py 代码】

AI审查发现的问题：
【粘贴AI代码审查的反馈】

修复要求：
1. 防止负价格（当优惠超价时，返回0而不是负数）
2. 参数校验（拒绝负数输入，抛出ValueError）
3. 添加日志记录（优惠超价时记录WARNING日志）
4. 保持原有方法签名不变
5. 符合PEP8规范

直接输出修复后的完整代码，不要解释。
```

---

## ✅ 验证输出

修复后的代码应该：
- [ ] 包含参数校验（负数输入抛异常）
- [ ] 包含负价格保护（返回0）
- [ ] 包含日志记录
- [ ] 方法签名保持不变
- [ ] 语法正确，可以运行
