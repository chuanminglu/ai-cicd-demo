# Gitæäº¤ vs è´¨é‡é—¨æ£€æŸ¥ - æ ¸å¿ƒæ¦‚å¿µè§£æ

> **â“ å¸¸è§å›°æƒ‘**: ä¸ºä»€ä¹ˆè´¨é‡é—¨å¤±è´¥äº†ï¼Œä½†ä»£ç è¿˜æ˜¯æäº¤æˆåŠŸäº†ï¼Ÿ

---

## ğŸ”‘ æ ¸å¿ƒæ¦‚å¿µ

### ä»£ç æäº¤æµç¨‹çš„ä¸¤ä¸ªé˜¶æ®µ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æœ¬åœ°å¼€å‘   â”‚â”€â”€â”€â”€â”€â–¶â”‚  Git Push    â”‚â”€â”€â”€â”€â”€â–¶â”‚ GitHub Actions  â”‚
â”‚  å†™ä»£ç      â”‚      â”‚  æ¨é€ä»£ç     â”‚      â”‚  è´¨é‡é—¨æ£€æŸ¥     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           âœ…                      âŒ
                      æ€»æ˜¯æˆåŠŸ               å¯èƒ½å¤±è´¥
```

---

## âš ï¸ é‡è¦äº‹å®

### äº‹å®1ï¼šGit Push å’Œè´¨é‡é—¨æ£€æŸ¥æ˜¯åˆ†ç¦»çš„

| æ“ä½œ | æ—¶æœº | ç»“æœ |
|------|------|------|
| `git push` | ç«‹å³ | ä»£ç å·²æ¨é€åˆ°GitHubä»“åº“ âœ… |
| GitHub Actions | æ¨é€åå¼‚æ­¥æ‰§è¡Œ | è´¨é‡é—¨æ£€æŸ¥ï¼ˆå¯èƒ½å¤±è´¥ï¼‰âŒ |

**å…³é”®ç‚¹**ï¼š
- âœ… `git push` æˆåŠŸ = ä»£ç å·²ç»åœ¨GitHubä»“åº“é‡Œäº†
- âŒ Actionså¤±è´¥ = ä»£ç è´¨é‡ä¸è¾¾æ ‡ï¼Œä½†ä»£ç å·²ç»å­˜åœ¨

---

### äº‹å®2ï¼šActionså¤±è´¥ä¸ä¼šæ’¤é”€å·²æ¨é€çš„ä»£ç 

```bash
# ä½ æ‰§è¡Œçš„æ“ä½œ
git add .
git commit -m "add unused variables"
git push origin main

# ç»“æœï¼š
âœ… ä»£ç å·²æ¨é€åˆ°GitHub
âœ… ä½ å¯ä»¥åœ¨GitHubä¸Šçœ‹åˆ°è¿™äº›ä»£ç 
âŒ ä½†æ˜¯Actionsæ‰§è¡Œå¤±è´¥äº†
```

**ä¸ºä»€ä¹ˆï¼Ÿ**
- Gitæ˜¯**åˆ†å¸ƒå¼**ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ
- PushæˆåŠŸåï¼Œä»£ç å°±åœ¨è¿œç¨‹ä»“åº“äº†
- Actionsæ˜¯**äº‹å**æ‰§è¡Œçš„æ£€æŸ¥ï¼Œä¸èƒ½æ’¤é”€å·²æ¨é€çš„ä»£ç 

---

## ğŸ¯ å¦‚ä½•çœŸæ­£é˜»æ­¢"åä»£ç "è¿›å…¥ä¸»åˆ†æ”¯ï¼Ÿ

### æ–¹æ¡ˆ1ï¼šBranch Protection Rulesï¼ˆåˆ†æ”¯ä¿æŠ¤ - æ¨èï¼‰â­

**é…ç½®æ­¥éª¤**ï¼š

1. è®¿é—®GitHubä»“åº“
2. Settings â†’ Branches â†’ Add rule
3. é…ç½®ä»¥ä¸‹è§„åˆ™ï¼š

```yaml
Branch name pattern: main
â˜‘ï¸ Require status checks to pass before merging
  â˜‘ï¸ Require branches to be up to date before merging
  â˜‘ï¸ Status checks that are required:
      - quality-check (ä½ çš„GitHub Actions jobåç§°)

â˜‘ï¸ Require pull request reviews before merging
â˜‘ï¸ Do not allow bypassing the above settings
```

**æ•ˆæœ**ï¼š

```
å¼€å‘è€…å°è¯•åˆå¹¶PRåˆ°main
         â†“
GitHubæ£€æŸ¥ï¼šè´¨é‡é—¨æ˜¯å¦é€šè¿‡ï¼Ÿ
         â†“
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â†“         â†“
  âœ…é€šè¿‡    âŒå¤±è´¥
    â†“         â†“
 å…è®¸åˆå¹¶   ğŸš« é˜»æ­¢åˆå¹¶
```

---

### æ–¹æ¡ˆ2ï¼šä½¿ç”¨Pull Requestå·¥ä½œæµï¼ˆæœ€ä½³å®è·µï¼‰â­â­â­

**æ­£ç¡®çš„å·¥ä½œæµç¨‹**ï¼š

```bash
# âŒ é”™è¯¯åšæ³•ï¼šç›´æ¥æ¨é€åˆ°main
git push origin main  # æ— æ³•å¼ºåˆ¶è´¨é‡æ£€æŸ¥

# âœ… æ­£ç¡®åšæ³•ï¼šé€šè¿‡PRåˆå¹¶
git checkout -b feature/my-feature
git add .
git commit -m "add feature"
git push origin feature/my-feature

# ç„¶ååœ¨GitHubåˆ›å»ºPR: feature/my-feature â†’ main
# GitHubä¼šè‡ªåŠ¨è¿è¡ŒActions
# å¦‚æœé…ç½®äº†åˆ†æ”¯ä¿æŠ¤ï¼Œè´¨é‡é—¨å¤±è´¥æ—¶æ— æ³•åˆå¹¶
```

**PR + Branch Protectionçš„æ•ˆæœ**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Pull Request: feature â†’ main            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âœ… 1 check passed                       â”‚
â”‚  âŒ quality-check â€” Required             â”‚
â”‚      Pylint check failed (7.5/10)        â”‚
â”‚                                          â”‚
â”‚  ğŸš« Merge button disabled                â”‚
â”‚     "1 check has failed"                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### æ–¹æ¡ˆ3ï¼šGit Pre-commit Hookï¼ˆæœ¬åœ°æ‹¦æˆªï¼‰

åœ¨æœ¬åœ°æäº¤å‰å°±æ£€æŸ¥ï¼š

**åˆ›å»º `.git/hooks/pre-commit`**ï¼š

```bash
#!/bin/bash

echo "ğŸ” æ‰§è¡Œè´¨é‡é—¨æ£€æŸ¥..."

# Pylintæ£€æŸ¥
python -m pylint src/ --fail-under=8.0
if [ $? -ne 0 ]; then
    echo "âŒ Pylintæ£€æŸ¥å¤±è´¥ï¼Œæäº¤è¢«æ‹’ç»"
    exit 1
fi

# Pytestæµ‹è¯•
python -m pytest tests/ --cov=src --cov-fail-under=80 -v
if [ $? -ne 0 ]; then
    echo "âŒ æµ‹è¯•å¤±è´¥ï¼Œæäº¤è¢«æ‹’ç»"
    exit 1
fi

echo "âœ… è´¨é‡é—¨æ£€æŸ¥é€šè¿‡"
exit 0
```

**æ•ˆæœ**ï¼š

```bash
git commit -m "add unused variables"

# è¾“å‡ºï¼š
ğŸ” æ‰§è¡Œè´¨é‡é—¨æ£€æŸ¥...
âŒ Pylintæ£€æŸ¥å¤±è´¥ï¼Œæäº¤è¢«æ‹’ç»

# æäº¤è¢«é˜»æ­¢ï¼Œä»£ç ä¸ä¼šè¿›å…¥æœ¬åœ°ä»“åº“
```

---

## ğŸ“Š ä¸‰ç§æ–¹æ¡ˆå¯¹æ¯”

| æ–¹æ¡ˆ | æ‹¦æˆªä½ç½® | é€‚ç”¨åœºæ™¯ | å¼ºåˆ¶ç¨‹åº¦ | æ¨èåº¦ |
|------|---------|----------|----------|--------|
| **Branch Protection** | GitHubè¿œç¨‹ | å›¢é˜Ÿåä½œ | â­â­â­â­â­ | â­â­â­â­â­ |
| **PR Workflow** | GitHubè¿œç¨‹ | æ­£å¼é¡¹ç›® | â­â­â­â­â­ | â­â­â­â­â­ |
| **Pre-commit Hook** | æœ¬åœ° | ä¸ªäººå¼€å‘ | â­â­ (å¯ç»•è¿‡) | â­â­â­ |

---

## ğŸ“ ä½ å½“å‰çš„æƒ…å†µåˆ†æ

### ç°çŠ¶

```
ä½ çš„æ“ä½œï¼š
git push origin main
   â†“
âœ… ä»£ç æ¨é€åˆ°GitHubæˆåŠŸ
   â†“
GitHubè‡ªåŠ¨è§¦å‘Actions
   â†“
âŒ Pylintæ£€æŸ¥å¤±è´¥ï¼ˆ7.5/10 < 8.0ï¼‰
   â†“
ç»“æœï¼šä»£ç åœ¨ä»“åº“é‡Œï¼Œä½†Actionså¤±è´¥äº†
```

### é—®é¢˜

- âš ï¸ **æ²¡æœ‰é…ç½®åˆ†æ”¯ä¿æŠ¤**ï¼Œæ‰€ä»¥å³ä½¿Actionså¤±è´¥ï¼Œä»£ç ä¹Ÿæ¨é€æˆåŠŸäº†
- âš ï¸ **ç›´æ¥æ¨é€åˆ°mainåˆ†æ”¯**ï¼Œç»•è¿‡äº†PRå®¡æŸ¥æµç¨‹

### è§£å†³æ–¹æ¡ˆ

**ç«‹å³é…ç½®ï¼ˆæ¨èï¼‰**ï¼š

1. **å¯ç”¨åˆ†æ”¯ä¿æŠ¤**
   ```
   Settings â†’ Branches â†’ Add rule for `main`
   â˜‘ï¸ Require status checks to pass
   ```

2. **æ”¹ç”¨PRå·¥ä½œæµ**
   ```bash
   # ä»¥åçš„å¼€å‘æµç¨‹
   git checkout -b feature/xxx
   # ... å¼€å‘ ...
   git push origin feature/xxx
   # åœ¨GitHubåˆ›å»ºPRï¼Œç­‰å¾…è´¨é‡é—¨é€šè¿‡ååˆå¹¶
   ```

---

## ğŸ”§ å®æˆ˜æ¼”ç»ƒ

### åœºæ™¯1ï¼šæ¨¡æ‹Ÿåˆ†æ”¯ä¿æŠ¤çš„æ•ˆæœï¼ˆä¸é…ç½®åˆ†æ”¯ä¿æŠ¤ï¼‰

**å½“å‰çŠ¶æ€**ï¼šæ— åˆ†æ”¯ä¿æŠ¤

```bash
# åˆ›å»ºé—®é¢˜ä»£ç 
# ï¼ˆæ·»åŠ æœªä½¿ç”¨å˜é‡ï¼‰

# ç›´æ¥æ¨é€åˆ°main
git add .
git commit -m "test: add unused variables"
git push origin main

# ç»“æœï¼š
âœ… PushæˆåŠŸ
âœ… ä»£ç åœ¨GitHubä¸Šå¯è§
âŒ Actionsè¿è¡Œå¤±è´¥
âš ï¸ ä½†ä»£ç å·²ç»åœ¨mainåˆ†æ”¯äº†ï¼
```

---

### åœºæ™¯2ï¼šé…ç½®åˆ†æ”¯ä¿æŠ¤åçš„æ•ˆæœ

**é…ç½®åçŠ¶æ€**ï¼šå¯ç”¨åˆ†æ”¯ä¿æŠ¤

```bash
# åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
git checkout -b feature/test

# æ·»åŠ é—®é¢˜ä»£ç 
# ï¼ˆæ·»åŠ æœªä½¿ç”¨å˜é‡ï¼‰

# æ¨é€åˆ°åŠŸèƒ½åˆ†æ”¯
git add .
git commit -m "test: add unused variables"
git push origin feature/test

# åœ¨GitHubåˆ›å»ºPR: feature/test â†’ main
```

**GitHubä¸Šçš„PRç•Œé¢**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Merge pull request                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âŒ Some checks were not successful         â”‚
â”‚     1 failing check                         â”‚
â”‚                                             â”‚
â”‚  âŒ quality-check                           â”‚
â”‚     Pylint evaluation failed (7.5/10)       â”‚
â”‚                                             â”‚
â”‚  [Merge pull request] â† æŒ‰é’®ç¦ç”¨            â”‚
â”‚  Merging is blocked                         â”‚
â”‚  Required status check "quality-check"      â”‚
â”‚  has not succeeded                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ­¤æ—¶ä½ å¿…é¡»**ï¼š
1. ä¿®å¤ä»£ç ï¼ˆåˆ é™¤æœªä½¿ç”¨çš„å˜é‡ï¼‰
2. é‡æ–°æ¨é€
3. ç­‰å¾…Actionsé€šè¿‡
4. æ‰èƒ½ç‚¹å‡»åˆå¹¶æŒ‰é’®

---

## ğŸ’¡ å…³é”®ç†è§£

### Git Push â‰  ä»£ç åˆå¹¶åˆ°ä¸»åˆ†æ”¯

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è¯¯è§£ï¼špushå¤±è´¥ = è´¨é‡é—¨æ‹¦æˆª                      â”‚
â”‚  âŒ git push å‡ ä¹æ€»æ˜¯æˆåŠŸçš„                       â”‚
â”‚  âŒ Actionså¤±è´¥ä¸ä¼šé˜»æ­¢push                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ­£ç¡®ç†è§£ï¼š                                       â”‚
â”‚  âœ… PRåˆå¹¶è¢«é˜»æ­¢ = çœŸæ­£çš„è´¨é‡é—¨æ‹¦æˆª               â”‚
â”‚  âœ… éœ€è¦é…ç½®Branch Protection Rules               â”‚
â”‚  âœ… éœ€è¦ä½¿ç”¨PRå·¥ä½œæµ                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‹ è¡ŒåŠ¨æ¸…å•

### ç«‹å³é…ç½®ï¼ˆ5åˆ†é’Ÿï¼‰

- [ ] é…ç½®mainåˆ†æ”¯ä¿æŠ¤è§„åˆ™
- [ ] è¦æ±‚status checkså¿…é¡»é€šè¿‡
- [ ] ç¦æ­¢ç›´æ¥æ¨é€åˆ°main

### æ”¹å˜å·¥ä½œæµï¼ˆé•¿æœŸï¼‰

- [ ] ä½¿ç”¨featureåˆ†æ”¯å¼€å‘
- [ ] é€šè¿‡PRåˆå¹¶åˆ°main
- [ ] ç­‰å¾…è´¨é‡é—¨æ£€æŸ¥é€šè¿‡å†åˆå¹¶

### å¯é€‰å¢å¼º

- [ ] é…ç½®æœ¬åœ°pre-commit hook
- [ ] é…ç½®PR reviewè¦æ±‚
- [ ] é…ç½®CODEOWNERSæ–‡ä»¶

---

## ğŸ¯ æ¼”ç»ƒå»ºè®®

### æ¨èçš„æ¼”ç»ƒæµç¨‹

1. **ç¬¬ä¸€æ¬¡æ¨é€**ï¼ˆæ¼”ç¤ºé—®é¢˜ï¼‰
   ```bash
   # ç›´æ¥æ¨é€é—®é¢˜ä»£ç åˆ°main
   git push origin main
   # è§‚å¯Ÿï¼šä»£ç æ¨é€æˆåŠŸï¼Œä½†Actionså¤±è´¥
   ```

2. **é…ç½®åˆ†æ”¯ä¿æŠ¤**
   ```
   Settings â†’ Branches â†’ é…ç½®mainåˆ†æ”¯ä¿æŠ¤
   ```

3. **ç¬¬äºŒæ¬¡å°è¯•**ï¼ˆæ¼”ç¤ºæ‹¦æˆªï¼‰
   ```bash
   # åˆ›å»ºPR
   git checkout -b feature/fix
   git push origin feature/fix
   # åˆ›å»ºPRï¼Œè§‚å¯Ÿï¼šæ— æ³•åˆå¹¶ï¼Œè¢«åˆ†æ”¯ä¿æŠ¤æ‹¦æˆª
   ```

4. **ä¿®å¤ä»£ç **ï¼ˆæ¼”ç¤ºé€šè¿‡ï¼‰
   ```bash
   # åˆ é™¤æœªä½¿ç”¨å˜é‡
   git add .
   git commit -m "fix: remove unused variables"
   git push origin feature/fix
   # è§‚å¯Ÿï¼šActionsé€šè¿‡ï¼Œå¯ä»¥åˆå¹¶
   ```

---

## â“ å¸¸è§é—®é¢˜

**Q1: ä¸ºä»€ä¹ˆä¸ç›´æ¥åœ¨pushæ—¶å°±æ‹’ç»ï¼Ÿ**

A: Gitæ˜¯åˆ†å¸ƒå¼çš„ï¼Œæ— æ³•åœ¨pushæ—¶è¿è¡Œå¤æ‚çš„æ£€æŸ¥ã€‚GitHub Actionsæ˜¯å¼‚æ­¥æ‰§è¡Œçš„ï¼Œéœ€è¦æ—¶é—´ã€‚

**Q2: å¦‚æœæˆ‘æ˜¯ä¸ªäººé¡¹ç›®ï¼Œéœ€è¦é…ç½®åˆ†æ”¯ä¿æŠ¤å—ï¼Ÿ**

A: å»ºè®®é…ç½®ã€‚å…»æˆå¥½ä¹ æƒ¯ï¼Œå³ä½¿æ˜¯ä¸ªäººé¡¹ç›®ä¹Ÿåº”è¯¥ä¿è¯ä»£ç è´¨é‡ã€‚

**Q3: å¯ä»¥ç»•è¿‡åˆ†æ”¯ä¿æŠ¤å—ï¼Ÿ**

A: ä»“åº“ç®¡ç†å‘˜å¯ä»¥ç»•è¿‡ï¼Œä½†ä¼šæœ‰è®°å½•ã€‚ä¸å»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒç»•è¿‡ã€‚

**Q4: ä¸ºä»€ä¹ˆæˆ‘çœ‹åˆ°æœ‰äº›é¡¹ç›®å¯ä»¥"Merge without checks"ï¼Ÿ**

A: é‚£æ˜¯å› ä¸ºä»–ä»¬æ²¡æœ‰é…ç½®å¼ºåˆ¶æ£€æŸ¥ï¼Œæˆ–è€…æ˜¯ç®¡ç†å‘˜æƒé™ç»•è¿‡äº†ã€‚

---

**æ€»ç»“**: 
- Git Pushåªæ˜¯æ¨é€ä»£ç ï¼Œä¸ç­‰äºè´¨é‡é—¨æ£€æŸ¥
- çœŸæ­£çš„è´¨é‡é—¨æ‹¦æˆªéœ€è¦é…ç½®åˆ†æ”¯ä¿æŠ¤ + PRå·¥ä½œæµ
- å½“å‰ä½ çš„ä»£ç èƒ½æ¨é€æˆåŠŸï¼Œæ˜¯å› ä¸ºæ²¡æœ‰é…ç½®åˆ†æ”¯ä¿æŠ¤

---

**æ–‡æ¡£æ›´æ–°æ—¶é—´**: 2026-01-11
